{"version":3,"file":"index.js","sources":["../src/js/render-functions.js","../src/js/pixabay-api.js","../src/main.js"],"sourcesContent":["import SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n\n    const lightbox = new SimpleLightbox('.gallery a', {\n    captionsData: 'alt',\n    captionPosition: 'bottom',\n    captionDelay: 250,\n    closeText: 'x',\n    showCounter: true,\n})\n\n// export function createButtom(){\n//   const newButton = document.createElement('button');\n//   newButton.textContent = 'Load more';\n//   newButton.classList.add('btn-load');\n//   newButton.hidden = true;\n//   document.body.append(newButton);\n\n//   refs.btnLoadElem = newButton;\n// }\n\n\nexport const refs = {\n    formElem: document.querySelector(\".form\"),\n    listElem: document.querySelector(\".gallery\"),\n    btnLoadElem: document.querySelector(\".btn-load\")\n};\n\n\nexport function handlerFormSub(event){\n    event.preventDefault();\n    const formInput = event.target.elements[\"search-text\"].value.trim();\n    event.target.reset();\n    return formInput;\n}\n\n\nexport function createGallery(images){\n    const { hits } = images;\n    const markup = hits.map(hit =>{\n    return `<li class=\"item-gallery\">\n    <a href=\"${hit.largeImageURL}\">\n    <img class=\"gallery-image\" \n      src=\"${hit.webformatURL}\" \n      alt=\"${hit.tags}\" \n      width=\"360px\"\n      height=\"152px\">\n    </a>\n      <ul class=\"list-descriptions\">\n        <li class=\"name\">\n          <p class=\"title-text\">Likes <span class=\"text\">${hit.likes}</span></p>\n        </li>\n        <li class=\"name\">\n          <p class=\"title-text\">Views <span class=\"text\">${hit.views}</span></p>\n        </li>\n        <li class=\"name\">\n          <p class=\"title-text\">Comments <span class=\"text\">${hit.comments}</span></p>\n        </li>\n        <li class=\"name\">\n          <p class=\"title-text\">Downloads <span class=\"text\">${hit.downloads}</span></p>\n        </li>\n      </ul>\n  </li>`\n    }).join(\"\");\n    refs.listElem.insertAdjacentHTML(\"beforeend\", markup);\n\n    lightbox.refresh();\n\n    const firstItem = document.querySelector('.item-gallery');\n    if (firstItem) {\n        const cardHeight = firstItem.getBoundingClientRect().height;\n\n        window.scrollBy({\n            top: cardHeight * 2,\n            behavior: 'smooth'\n        });\n    }\n}\n\nexport function clearGallery() {\n  refs.listElem.innerHTML = \"\";\n}\n\nexport function showLoader(){\ndocument.getElementById('loader-wrap').hidden = false;\n}\n\nexport function hideLoader() {\n  document.getElementById('loader-wrap').hidden = true;\n}\n\nexport function showBtnMore (){\n  refs.btnLoadElem.hidden = false;\n}\n\nexport function hiddenBtnMore(){\n  refs.btnLoadElem.hidden = true;\n}\n\n\n\n","\nimport axios from 'axios';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport { refs } from './render-functions';\n\nexport async function getImagesByQuery(query, page=1, per_page=15) {\n    const BASE_URL = 'https://pixabay.com/api/';\n    const API_KEY = '50348877-00e3539199181f67fed2a274d'\n    const params = new URLSearchParams({\n        'key': API_KEY,\n        'q': query,\n        'image_type': 'photo',\n        'orientation': 'horizontal',\n        'safesearch': true,\n        'page': page,\n        'per_page': per_page,\n  });\n\n  const url = `${BASE_URL}?${params.toString()}`;\n  const res = await axios.get(url, { params});\n  console.log(res.data);\n  return res.data\n}\n\n","import { getImagesByQuery } from \"./js/pixabay-api\" ;\nimport iziToast from 'izitoast';\nimport { hideLoader, showLoader, clearGallery, createGallery, handlerFormSub, refs, showBtnMore, hiddenBtnMore } from \"./js/render-functions\";\n\n\nlet page = 1;\nlet per_page = 15 ;\nlet lastQuery = \"\";\n\n// createButtom();\nhiddenBtnMore();\n\n\nrefs.formElem.addEventListener('submit', async (event) => {\n  hiddenBtnMore();\n  event.preventDefault();\n  clearGallery();\n  showLoader()\n  const query = handlerFormSub(event);\n  lastQuery = query;\n  try {\n    const data = await getImagesByQuery(query, page, per_page)\n    hideLoader();\n    if(data.hits.length === 0){\n        iziToast.show({\n          title: '',\n          titleColor: '#FFFFFF',\n          titleSize: '16px',\n          backgroundColor: '#EF4040',\n          iconUrl: './img/bi_x-octagon.svg',\n          message: 'Sorry, there are no images matching your search query. Please try again!',\n          position: 'topRight',\n          color: 'red',\n          messageColor: '#FFFFFF',\n          messageSize: '16px',\n          closeOnEscape: true,\n          closeOnClick: true,\n          theme: 'dark',\n  })\n    return null;\n  } \n\n    createGallery(data);\n    if (data.total > page * per_page){\n      showBtnMore();\n    } else {\n      hiddenBtnMore();\n        iziToast.show({\n          title: '',\n          titleColor: '#FFFFFF',\n          titleSize: '16px',\n          backgroundColor: '#B5EA7C',\n          iconUrl: './img/bi_x-octagon.svg',\n          message: 'We`re sorry, but you`ve reached the end of search results.',\n          position: 'topRight',\n          color: 'red',\n          messageColor: '#FFFFFF',\n          messageSize: '16px',\n          closeOnEscape: true,\n          closeOnClick: true,\n          theme: 'dark',\n  })\n    };\n  } catch(error){\n    hideLoader();\n    hiddenBtnMore();\n    iziToast.show({\n          title: 'ERROR',\n          titleColor: '#FFFFFF',\n          titleSize: '16px',\n          backgroundColor: '#EF4040',\n          iconUrl: './img/bi_x-octagon.svg',\n          message: 'Something wrong',\n          position: 'topRight',\n          color: 'red',\n          messageColor: '#FFFFFF',\n          messageSize: '16px',\n          closeOnEscape: true,\n          closeOnClick: true,\n          theme: 'dark',\n});\n    return null;\n}\n});\n\n\nrefs.btnLoadElem.addEventListener('click', async (event) => {\n  console.log(event);\n  page += 1;\n  hiddenBtnMore();\n  showLoader();\n  try {\n    const data = await getImagesByQuery(lastQuery, page, per_page);\n    hideLoader();\n    createGallery(data);\n    if (data.total <= page * per_page){\n        iziToast.show({\n          title: '',\n          titleColor: '#FFFFFF',\n          titleSize: '16px',\n          backgroundColor: '#B5EA7C',\n          iconUrl: './img/bi_x-octagon.svg',\n          message: 'We`re sorry, but you`ve reached the end of search results.',\n          position: 'topRight',\n          color: 'red',\n          messageColor: '#FFFFFF',\n          messageSize: '16px',\n          closeOnEscape: true,\n          closeOnClick: true,\n          theme: 'dark',\n  })\n    } else showBtnMore();\n  } \n  catch(error){\n    hideLoader();\n    iziToast.show({\n          title: 'ERROR',\n          titleColor: '#FFFFFF',\n          titleSize: '16px',\n          backgroundColor: '#EF4040',\n          iconUrl: './img/bi_x-octagon.svg',\n          message: 'Something wrong',\n          position: 'topRight',\n          color: 'red',\n          messageColor: '#FFFFFF',\n          messageSize: '16px',\n          closeOnEscape: true,\n          closeOnClick: true,\n          theme: 'dark',\n});\n    return null;\n}\n});"],"names":["lightbox","SimpleLightbox","refs","handlerFormSub","event","formInput","createGallery","images","hits","markup","hit","firstItem","cardHeight","clearGallery","showLoader","hideLoader","showBtnMore","hiddenBtnMore","getImagesByQuery","query","page","per_page","BASE_URL","API_KEY","params","url","res","axios","lastQuery","data","iziToast"],"mappings":"owBAGI,MAAMA,EAAW,IAAIC,EAAe,aAAc,CAClD,aAAc,MACd,gBAAiB,SACjB,aAAc,IACd,UAAW,IACX,YAAa,EACjB,CAAC,EAaYC,EAAO,CAChB,SAAU,SAAS,cAAc,OAAO,EACxC,SAAU,SAAS,cAAc,UAAU,EAC3C,YAAa,SAAS,cAAc,WAAW,CACnD,EAGO,SAASC,EAAeC,EAAM,CACjCA,EAAM,eAAc,EACpB,MAAMC,EAAYD,EAAM,OAAO,SAAS,aAAa,EAAE,MAAM,OAC7D,OAAAA,EAAM,OAAO,QACNC,CACX,CAGO,SAASC,EAAcC,EAAO,CACjC,KAAM,CAAE,KAAAC,CAAM,EAAGD,EACXE,EAASD,EAAK,IAAIE,GACjB;AAAA,eACIA,EAAI,aAAa;AAAA;AAAA,aAEnBA,EAAI,YAAY;AAAA,aAChBA,EAAI,IAAI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,2DAMsCA,EAAI,KAAK;AAAA;AAAA;AAAA,2DAGTA,EAAI,KAAK;AAAA;AAAA;AAAA,8DAGNA,EAAI,QAAQ;AAAA;AAAA;AAAA,+DAGXA,EAAI,SAAS;AAAA;AAAA;AAAA,QAIvE,EAAE,KAAK,EAAE,EACVR,EAAK,SAAS,mBAAmB,YAAaO,CAAM,EAEpDT,EAAS,QAAO,EAEhB,MAAMW,EAAY,SAAS,cAAc,eAAe,EACxD,GAAIA,EAAW,CACX,MAAMC,EAAaD,EAAU,sBAAqB,EAAG,OAErD,OAAO,SAAS,CACZ,IAAKC,EAAa,EAClB,SAAU,QACtB,CAAS,CACJ,CACL,CAEO,SAASC,GAAe,CAC7BX,EAAK,SAAS,UAAY,EAC5B,CAEO,SAASY,GAAY,CAC5B,SAAS,eAAe,aAAa,EAAE,OAAS,EAChD,CAEO,SAASC,GAAa,CAC3B,SAAS,eAAe,aAAa,EAAE,OAAS,EAClD,CAEO,SAASC,GAAc,CAC5Bd,EAAK,YAAY,OAAS,EAC5B,CAEO,SAASe,GAAe,CAC7Bf,EAAK,YAAY,OAAS,EAC5B,CC5FO,eAAegB,EAAiBC,EAAOC,EAAK,EAAGC,EAAS,GAAI,CAC/D,MAAMC,EAAW,2BACXC,EAAU,qCACVC,EAAS,IAAI,gBAAgB,CAC/B,IAAOD,EACP,EAAKJ,EACL,WAAc,QACd,YAAe,aACf,WAAc,GACd,KAAQC,EACR,SAAYC,CACpB,CAAG,EAEKI,EAAM,GAAGH,CAAQ,IAAIE,EAAO,SAAU,CAAA,GACtCE,EAAM,MAAMC,EAAM,IAAIF,EAAK,CAAE,OAAAD,CAAM,CAAC,EAC1C,eAAQ,IAAIE,EAAI,IAAI,EACbA,EAAI,IACb,CCjBA,IAAIN,EAAO,EACPC,EAAW,GACXO,EAAY,GAGhBX,IAGAf,EAAK,SAAS,iBAAiB,SAAU,MAAOE,GAAU,CACxDa,IACAb,EAAM,eAAc,EACpBS,IACAC,EAAY,EACZ,MAAMK,EAAQhB,EAAeC,CAAK,EAClCwB,EAAYT,EACZ,GAAI,CACF,MAAMU,EAAO,MAAMX,EAAiBC,EAAOC,EAAMC,CAAQ,EAEzD,GADAN,IACGc,EAAK,KAAK,SAAW,EACpB,OAAAC,EAAS,KAAK,CACZ,MAAO,GACP,WAAY,UACZ,UAAW,OACX,gBAAiB,UACjB,QAAS,yBACT,QAAS,2EACT,SAAU,WACV,MAAO,MACP,aAAc,UACd,YAAa,OACb,cAAe,GACf,aAAc,GACd,MAAO,MACjB,CAAG,EACQ,KAGPxB,EAAcuB,CAAI,EACdA,EAAK,MAAQT,EAAOC,EACtBL,KAEAC,IACEa,EAAS,KAAK,CACZ,MAAO,GACP,WAAY,UACZ,UAAW,OACX,gBAAiB,UACjB,QAAS,yBACT,QAAS,6DACT,SAAU,WACV,MAAO,MACP,aAAc,UACd,YAAa,OACb,cAAe,GACf,aAAc,GACd,MAAO,MACjB,CAAG,EAEA,MAAa,CACZ,OAAAf,IACAE,IACAa,EAAS,KAAK,CACR,MAAO,QACP,WAAY,UACZ,UAAW,OACX,gBAAiB,UACjB,QAAS,yBACT,QAAS,kBACT,SAAU,WACV,MAAO,MACP,aAAc,UACd,YAAa,OACb,cAAe,GACf,aAAc,GACd,MAAO,MACjB,CAAC,EACU,IACX,CACA,CAAC,EAGD5B,EAAK,YAAY,iBAAiB,QAAS,MAAOE,GAAU,CAC1D,QAAQ,IAAIA,CAAK,EACjBgB,GAAQ,EACRH,IACAH,IACA,GAAI,CACF,MAAMe,EAAO,MAAMX,EAAiBU,EAAWR,EAAMC,CAAQ,EAC7DN,IACAT,EAAcuB,CAAI,EACdA,EAAK,OAAST,EAAOC,EACrBS,EAAS,KAAK,CACZ,MAAO,GACP,WAAY,UACZ,UAAW,OACX,gBAAiB,UACjB,QAAS,yBACT,QAAS,6DACT,SAAU,WACV,MAAO,MACP,aAAc,UACd,YAAa,OACb,cAAe,GACf,aAAc,GACd,MAAO,MACjB,CAAG,EACQd,EAAW,CACnB,MACW,CACV,OAAAD,IACAe,EAAS,KAAK,CACR,MAAO,QACP,WAAY,UACZ,UAAW,OACX,gBAAiB,UACjB,QAAS,yBACT,QAAS,kBACT,SAAU,WACV,MAAO,MACP,aAAc,UACd,YAAa,OACb,cAAe,GACf,aAAc,GACd,MAAO,MACjB,CAAC,EACU,IACX,CACA,CAAC"}